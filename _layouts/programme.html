---
layout: page
---

<div class="container my-4 p-4 border-2px border-zoo-orange shadow">
	<div class="row">
		<div class="col-12">
			<div class="d-flex justify-content-between">
				<button class="programme-menu active" type="button" data-bs-toggle="collapse" data-bs-target="#filter-box" aria-expanded="false" aria-controls="filter-box" id="filter-box-button"><i class="fa fa-fw fa-star"></i>&nbsp;Find something for you</button>
				<button class="programme-menu" type="button" data-bs-toggle="collapse" data-bs-target="#search-box" aria-expanded="false" aria-controls="search-box" id="search-box-button" onclick="focusSearch()"><i class="fa fa-search"></i>&nbsp;Search for what you're looking for</button>
				<a role="button" data-bs-toggle="tooltip" title="Clear all filters and search queries" class="programme-menu" href="#show-list"><i class="fa fa-fw fa-book"></i>&nbsp;Browse the full programme</a>
			</div>
		</div>
	</div>
	<div class="mx-4" id="control-area"> 
		<!-- Search Box -->
		<div id="search-box" class="collapse mt-5 row" data-bs-parent="#control-area">
			<div class="col-12">
				<input class="form-control form-control-lg fa-font search-box-icon border-zoo-orange" type="text" placeholder="&#xF002; Search" aria-label="Search for a show" id="search-input">
				<p class="mt-2"><span class="helper-text d-none" id="search-hint">(Give us a bit more please)</span>&nbsp;</p>
			</div>
			<div class="col w-100 text-center">
				<button class="close-button" type="button" data-bs-toggle="collapse" data-bs-target="#search-box" aria-expanded="false" aria-controls="search-box">Close this <i class="fa fa-chevron-up fa-fw"></i></button>
			</div>
		</div>
		<!-- Filter Menu Box -->
		<div id="filter-box" class="collapse mt-4 row row-cols-md-2 show" data-bs-parent="#control-area">
			<div class="col w-100"><p class="fs-2 bebas">I want a show...</p></div>
			<!-- Dates -->
			<div class="col">
				<div class="card-programme">
					<div class="card-header" data-bs-toggle="collapse" data-bs-target="#filter-date" aria-expanded="false" aria-controls="filter-date">
						<p><span>On these dates <span id="filter-date-counter"></span></span><i class="fa fa-chevron-down fa-fw float-end"></i></p>
					</div>
					<div class="collapse" id="filter-date">
						<div class="card-body d-flex justify-content-around">
							<input id="datepicker" class="d-none"/>
						</div>
						<div class="card-footer">
							<p class="helper-text text-end"><a onclick=clearDatePick()><i class="fa fa-fw fa-undo"></i>&nbsp;Clear selection</a></p>
						</div>
					</div>
				</div>
			</div>
			<!-- Times -->
			<div class="col">
				<div class="card-programme">
					<div class="card-header" data-bs-toggle="collapse" data-bs-target="#filter-time" aria-expanded="false" aria-controls="filter-time">
						<p>From these times <i class="fa fa-chevron-down fa-fw float-end"></i></p>
					</div>
					<div class="collapse" id="filter-time">
						<div class="card-body">
							 {% assign earliest_secs = site.earliest_time | date: "%s" %}
							 {% assign latest_secs = site.latest_time | date: "%s" %}

							 {% assign hours_different = latest_secs | minus: earliest_secs | date: "%H" | minus: 1 %}
							 {% for i in (0..hours_different) %}
							 	{% assign diff = i | times: 3600 %}
							 	{% assign this_time = earliest_secs | plus: diff | date: "%H:%M" %}

							 	<input type="checkbox" name="filter-time-item" class="btn-check" id="filter-time-{{ this_time }}" autocomplete="off" value="{{ this_time }}">
								<label id="btn-price-{{this_time}}" class="btn-filter btn-price" for="filter-price-{{ this_time }}">{{ this_time }}</label>
							 {% endfor %}


						</div>
						<div class="card-footer">
							<p class="helper-text text-end"><a onclick=clearTimeCheckboxes()><i class="fa fa-fw fa-undo"></i>&nbsp;Clear selection</a></p>
						</div>
					</div>
				</div>
			</div>
			<!-- Prices -->
			<div class="col">
				<div class="card-programme">
					<div class="card-header" data-bs-toggle="collapse" data-bs-target="#filter-price" aria-expanded="false" aria-controls="filter-price">
						<p>Within this ticket price range <span id="filter-price-counter"></span> <i class="fa fa-chevron-down fa-fw float-end"></i></p>
					</div>
					<div class="collapse" id="filter-price">
						<div class="card-body">

							{% assign highest_priced_show = site.data.shows | sort: "price.standard" | reverse | first %}
							{% assign highest_price = highest_priced_show.price.standard %}
							{% assign price_int = highest_price | divided_by: 5 %}
							{% assign price_float = highest_price | divided_by: 5.0 %}
							{% if price_int == price_float %}
								{% assign highest_five = price_int %}
							{% else %}
								{% assign highest_five = price_float | split: '.' | first | plus: 1 | times: 1 %}
							{% endif %}
							{% for given_price in (0..highest_five) %}
								{% assign this_price = given_price | times: 5 %}
								{% assign next_price = given_price | plus: 1 | times: 5 %}
								<input type="checkbox" name="filter-price-item" class="btn-check" id="filter-price-{{ given_price }}" autocomplete="off" value="{{ this_price }},{{ next_price }}">
								<label id="btn-price-{{this_price}}-{{next_price}}" class="btn-filter btn-price" for="filter-price-{{ given_price }}">£{{ this_price }} - £{{ next_price }}</label>
							{% endfor %}
						</div>
						<div class="card-footer">
							<p class="helper-text text-end"><a onclick=clearPriceCheckboxes()><i class="fa fa-fw fa-undo"></i>&nbsp;Clear selection</a></p>
						</div>
					</div>
				</div>
			</div>
			<!-- Age Ratings -->
			<div class="col">
				<div class="card-programme">
					<div class="card-header" data-bs-toggle="collapse" data-bs-target="#filter-age" aria-expanded="false" aria-controls="filter-age">
						<p>With this age rating <i class="fa fa-chevron-down fa-fw float-end"></i></p>
					</div>
					<div class="collapse" id="filter-age">
						<div class="card-body">
							<div class="d-flex flex-row">
								{% for rating in site.data.age-ratings %}
									<input type="checkbox" class="btn-check" id="age-rating-{{ rating | slugify }}" autocomplete="off">
									<label class="btn-filter btn-age" for="age-rating-{{ rating | slugify }}">{{ rating }}</label><br>
								{% endfor %}
							</div>
						</div>
						<div class="card-footer">
							<p class="helper-text text-end"><a onclick=clearAgeCheckboxes()><i class="fa fa-fw fa-undo"></i>&nbsp;Clear selection</a></p>
						</div>
					</div>
				</div>
			</div>
			<!-- Genres -->
			{% assign genres_data = site.data.shows | map: "genre" | uniq  %}
			{% assign genres = '' | split: ''  %}
			{% for g in genres_data %}{% if g != nil %}{% assign genres = genres | push: g %}{% endif %}{% endfor %}
			{% assign genres = genres | sort %}
			{% unless genres.size <= 1 %}
			<div class="col">
				<div class="card-programme">
					<div class="card-header" data-bs-toggle="collapse" data-bs-target="#filter-genre" aria-expanded="false" aria-controls="filter-genre">
						<p>In these genres <span id="filter-genre-counter"></span> <i class="fa fa-chevron-down fa-fw float-end"></i></p>
					</div>
					<div class="collapse" id="filter-genre">
						<div class="card-body">
							{% for genre in genres %}
								<input type="checkbox" name="filter-genre-item" class="btn-check" id="filter-genre-{{ genre | slugify }}" autocomplete="off" value="{{genre | slugify}}">
								<label id="btn-genre-{{genre|slugify}}" class="btn-filter btn-genre" for="filter-genre-{{ genre | slugify }}">{{ genre }}</label>
							{% endfor %}
						</div>
						<div class="card-footer">
							<p class="helper-text text-end"><a onclick=clearGenreCheckboxes()><i class="fa fa-fw fa-undo"></i>&nbsp;Clear selection</a></p>
						</div>
					</div>
				</div>
			</div>
			{% endunless %}
			<!-- Access and Content Warnings -->
			{% assign content_warnings_data = site.data.shows | map: "content_warnings" | uniq  %}
			{% assign content_warnings = '' | split: ''  %}
			{% for cw in content_warnings_data %}{% if cw != nil %}{% assign content_warnings = content_warnings | push: cw %}{% endif %}{% endfor %}
			{% assign content_warnings = content_warnings | sort %}

			{% assign access_data = site.data.shows | map: "access" | uniq  %}
			{% assign access = '' | split: ''  %}
			{% for a in access_data %}{% if a != nil %}{% assign access = access | push: a %}{% endif %}{% endfor %}
			{% assign access = access | sort %}

			{% unless access.size <= 1 and content_warnings.size <= 1 %}
			<div class="col">
				<div class="card-programme">
					<div class="card-header" data-bs-toggle="collapse" data-bs-target="#filter-access" aria-expanded="false" aria-controls="filter-access">
						<p>With these access provisions <span id="filter-access-counter"></span> <i class="fa fa-chevron-down fa-fw float-end"></i></p>
					</div>
					<div class="collapse" id="filter-access">
						<div class="card-body">
							<p class="lead">Access</p>
							{% for access_item in access %}
								{% assign matching_icon = site.data.icons | where: "title", access_item | first %}
								<input type="checkbox" name="filter-access_item-item" class="btn-check" id="filter-access_item-{{ access_item | slugify }}" autocomplete="off" value="{{access_item | slugify}}">
								<label id="btn-access_item-{{access_item|slugify}}" class="btn-filter btn-access_item" for="filter-access_item-{{ access_item | slugify }}">{% if matching_icon %}<i class="{{ matching_icon.icon }}"></i>&nbsp;{% endif %}{{ access_item }}</label>
							{% endfor %}
							<hr class="w-100">
							<p class="lead">Content Warnings</p>
							{% for cw in content_warnings %}
								<input type="checkbox" name="filter-cw-item" class="btn-check" id="filter-cw-{{ cw | slugify }}" autocomplete="off" value="{{cw | slugify}}" checked>
								<label id="btn-cw-{{cw|slugify}}" class="btn-filter btn-cw" for="filter-cw-{{ cw | slugify }}">{{ cw }}</label>
							{% endfor %}
							<p class="helper-text text-muted ms-2 mt-1"><em><i class="fa fa-info-circle"></i>&nbsp;Select a content warning to <strong>remove</strong> shows with that content warning.</em></p>
						</div>
						<div class="card-footer">
							<p class="helper-text text-end"><a onclick=clearAccessCheckboxes()><i class="fa fa-fw fa-undo"></i>&nbsp;Clear selection</a></p>
						</div>
					</div>
				</div>
			</div>
			{% endunless %}
			<!-- Close filters  -->
			<div class="col w-100 text-center">
				<button class="close-button" type="button" data-bs-toggle="collapse" data-bs-target="#filter-box" aria-expanded="false" aria-controls="filter-box">Close this <i class="fa fa-chevron-up fa-fw"></i></button>
			</div>
		</div>
	</div>
</div>



{{ content }}

<div class="container"> 
	<div id="show-list" class="row row-cols-md-2 mb-5">
		<div class="d-none col w-100 text-center no-results" id="no-result-text">
			<p class="lead"><em>No results for this set of filters</em></p>
		</div>
		{% for show in site.data.shows %}
			{% include text/date-text.html show=show no_output=true %}
			<div class="col programme-show-container d-block" 
				data-search="{{ show.title | downcase | remove: ' ' }} {{ show.company | downcase | remove: ' ' }}" 
				data-date_start="{{ first_performance | date: '%Y-%m-%d' }}" 
				data-date_end="{{ last_performance | date: '%Y-%m-%d' }}" 
				data-performances='{{ show.performances | join: "," }}'
				data-price={{ show.price.concession | default: show.price.standard }} 
				data-genre="{{ show.genre | join:',' | slugify }}" id="{{ show.title | slugify }}">
				{% include components/show-card-small.html show=show %}
			</div>
		{% endfor %}
	</div>
</div>

<script>

	// When #activate-search onClick, remove .d-none from #search-box 
	// SEARCH
		// Fuzzy search on the entire data selection across title, company, blurb 

</script>
	
